!function(){"use strict";angular.module("ice.common",[]),angular.module("ice.forms",["ice.common"]),angular.module("ice.bank",["ice.common"]),angular.module("ice.common").factory("iceDirectiveUtils",function(){var a=function(a,b,c){var d=a[b];return("undefined"==typeof d||""===d)&&(d=c),d};return{getAttributeOrDefaultValue:a}}),angular.module("ice.common").factory("iceCaret",function(){var a=function(a,b){if(a.value=a.value,a.createTextRange){var c=a.createTextRange();return c.move("character",b),c.select(),!0}return a.selectionStart||0===a.selectionStart?(a.focus(),a.setSelectionRange(b,b),!0):(a.focus(),!1)},b=function(a){var b=a.value.length;return this.setPosition(a,b)};return{setPosition:a,setPositionToEnd:b}}),angular.module("ice.common").factory("iceStorage",["$window",function(a){var b=function(b){var c={type:b};return c.isSupported=function(){return"undefined"!=typeof a[c.type]},c.set=function(b,d){a[c.type].setItem(b,d)},c.setObject=function(b,d){a[c.type].setItem(b,angular.toJson(d))},c.get=function(b){return a[c.type].getItem(b)},c.getObject=function(b){return angular.fromJson(a[c.type].getItem(b))},c.remove=function(b){a[c.type].removeItem(b)},c};return{local:b("localStorage"),session:b("sessionStorage")}}]),angular.module("ice.common").factory("iceStringUtils",function(){var a=function(a,b){function c(a){return a.search(d)>-1}var d=new RegExp("^["+b+"]$"),e=a.split("");return e=e.filter(c),e.join("")},b=function(a,b){return a.substr(0,b)};return{onlyKeepAllowedChars:a,adjustToMaxNrOfChars:b}}),angular.module("ice.common").factory("iceUndefined",function(){var a=function(a){return"undefined"==typeof a},b=function(a){return null===a},c=function(a,b){return this.isUndefined(a)||this.isNull(a)?b:a};return{isUndefined:a,isNull:b,setIfUndefinedOrNull:c}}),angular.module("ice.forms").directive("iceAutoSelectContentOn",["iceDirectiveUtils",function(a){var b="click",c="blur",d=0,e=9999;return{restrict:"A",scope:{},link:function(f,g,h){function i(a,b,c){a.setSelectionRange&&a.setSelectionRange(b,c)}var j=a.getAttributeOrDefaultValue(h,"iceAutoSelectContentOn",b),k=a.getAttributeOrDefaultValue(h,"iceDeselectEvent",c);f.isElementSelected=!1,g.on(j,function(){f.isElementSelected||(this.select(),i(this,d,e),f.isElementSelected=!0)}),g.on(k,function(){f.isElementSelected=!1,i(this,0,0)})}}}]),angular.module("ice.bank").factory("iceBankAccountFormatter",["iceUndefined","iceStringUtils",function(a,b){function c(a){var c=a.toUpperCase();return c=b.onlyKeepAllowedChars(c,p)}function d(a){return b.onlyKeepAllowedChars(a,o)}function e(a){for(var b="",c=0;c<a.length;c++)0!==c&&c%4===0&&(b+=" "),b+=a.charAt(c);return b}function f(a){for(var b="",c=0;c<a.length;c++)(3===c||10===c)&&(b+="-"),b+=a.charAt(c);return b}function g(a,b){return""!==a&&a.length<b.length&&(a+=b.substr(a.length)),a}function h(a){return u(a)?r:s}function i(a,b){return u(a)?m:b||n}function j(a,c){var d=b.adjustToMaxNrOfChars(a,h(a));return d=e(d),d=g(d,i(d,c))}function k(a){var c=b.adjustToMaxNrOfChars(a,q);return c=f(c),c=g(c,l)}var l="___-_______-__",m="____ ____ ____ ____",n="____ ____ ____ ____ ____ ____ ____ ____ __",o="0-9",p="0-9A-Z",q=12,r=16,s=34,t=function(a){return a.search(/^[a-zA-Z]+.*$/)>-1},u=function(a){return a.search(/^BE.*$/)>-1},v=function(b,e){var f=a.setIfUndefinedOrNull(b,"");return this.isIBAN(f)?(f=c(f),j(f,e)):(f=d(f),k(f))};return{isIBAN:t,isBelgianIBAN:u,filterAndFormat:v}}]),angular.module("ice.bank").directive("iceBankAccountNumber",["iceStringUtils","iceCaret","iceBankAccountFormatter",function(a,b,c){return{restrict:"A",require:"?ngModel",link:function(d,e,f,g){function h(b,c){function d(){var a=c.indexOf("_");return a>-1?a:c.length}function e(a){return"undefined"==typeof g[a]||"-"!==g[a]&&" "!==g[a]?!1:!0}for(var f=b.split(""),g=c.split(""),h=a.onlyKeepAllowedChars(b,i),j=a.onlyKeepAllowedChars(c,i),k=0;k<g.length;k++)if(k>=f.length||g[k]!==f[k])return j.length>=h.length?e(k+1)?k+2:k+1:e(k-1)?k-1:k;return d()}if(g){var i="0-9A-Z",j="";g.$parsers.unshift(function(a){var d=c.filterAndFormat(a),f=h(j,d);return d!==a&&(g.$setViewValue(d),g.$render(),b.setPosition(e[0],f)),j=d,d}),g.$formatters.unshift(function(a){return j=c.filterAndFormat(a)})}}}}])}();